<div class="projects-container">
  <h2 class="title">Proyectos Profesionales</h2>

  <div class="carousel-wrap">
    <!-- Flechas de navegación -->
    <button class="nav-arrow left" (click)="scrollPrev()" aria-label="Anterior">‹</button>

    <!-- Carrusel -->
    <div #grid class="projects-grid">
      <div class="project-card" *ngFor="let proyecto of proyectos">
        <div class="img-frame">
          <img [src]="proyecto.imagen" [alt]="proyecto.titulo" class="project-img" />
        </div>
        <div class="project-info">
          <h3>{{ proyecto.titulo }}</h3>
          <p class="meta"><strong>Fecha:</strong> {{ proyecto.fecha }}</p>
          <button (click)="abrirModal(proyecto)" class="btn-detalle">Detalles</button>
        </div>
      </div>
    </div>

    <button class="nav-arrow right" (click)="scrollNext()" aria-label="Siguiente">›</button>
  </div>
</div>

<!-- Modal full screen -->
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-full">
    <button class="btn-close" (click)="cerrarModal()">✕</button>
    <div class="modal-body">
      <div class="left-col">
        <div class="img-carousel">
          <button class="img-arrow img-left" (click)="prevSlide()">‹</button>
          <div class="img-frame-large">
            <img [src]="selectedProyecto?.imagenes[currentSlide]?.url" 
                 [alt]="selectedProyecto?.imagenes[currentSlide]?.desc" />
          </div>
          <button class="img-arrow img-right" (click)="nextSlide()">›</button>
        </div>
        <p class="img-desc">{{ selectedProyecto?.imagenes[currentSlide]?.desc }}</p>
      </div>

      <div class="right-col">
        <h2 class="modal-title">{{ selectedProyecto?.titulo }}</h2>
        <p class="modal-meta"><strong>Empresa:</strong> {{ selectedProyecto?.empresa }}</p>
        <p class="modal-meta"><strong>Rol:</strong> {{ selectedProyecto?.rol }}</p>
        <p class="modal-meta"><strong>Fecha:</strong> {{ selectedProyecto?.fecha }}</p>

        <h3 class="centered">Objetivos Generales</h3>
        <p class="objetivo">{{ selectedProyecto?.objetivo }}</p>

        <h3>Tecnologías</h3>
        <div class="tech-grid">
          <div class="tech" *ngFor="let tech of selectedProyecto?.tecnologias">
            <img [src]="getTechIcon(tech)" [alt]="tech" class="tech-icon" />
            <span class="tech-name">{{ tech }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
